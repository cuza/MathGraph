function EliminarSel(a) {
    $("#dialog-ui").html("<p>¿Desea realmente eliminar?</p>"), $("#dialog-ui").dialog({autoOpen: !1, title: "Alerta", modal: !0, width: "300", buttons: [
        {text: "Aceptar", click: function () {
            $("#check-form-action").val(a), $("#check-form").submit()
        }},
        {text: "Cerrar", click: function () {
            $(this).dialog("close")
        }}
    ]}).dialog("open")
}
function Eliminar(a, e) {
    $("#dialog-ui").html("<p>¿Desea realmente eliminar?</p>");
    var i = "<form action='index.php' method='post' id='send-form'><input type='hidden' name='action' value='del" + a + "'/>" + "<input type='hidden' name='item' value='" + e + "'/>" + "</form>";
    $("body").append(i), $("#dialog-ui").dialog({autoOpen: !1, title: "Alerta", modal: !0, width: "300", buttons: [
        {text: "Aceptar", click: function () {
            $("#send-form").submit()
        }},
        {text: "Cerrar", click: function () {
            $(this).dialog("close")
        }}
    ]}).dialog("open")
}
function Ver(a, e) {
    console.log(a, e);
    var i = '<div class="graph"><div class="box chart" align="left"><h4><span class="icon16 icomoon-icon-bars"></span></h4></div><div class="content"><div class="simple-chart" style="height: 230px; width:450px;"></div><div id="chart1" class="simple-chart-2" style="height: 230px; width:450px;"></div><button value="reset" type="button" onclick="plot2.resetZoom();">Cancelar Zoom</button></div>';
    $("#dialog-ui").html(i), $("#dialog-ui").dialog({autoOpen: !1, title: "Grafica", modal: !0, width: "500", resizable: !1}).dialog("open"), GraficarFuncEstudiante(e)
}
function AddUsuario() {
    var a = "<form class='da-form' id='add-form' method='post' action='index.php'><input type='hidden' name='action' value='addUsuario'/><div class='da-form-row'><label>Nombre</label><div class='da-form-item default'><input type='text' name='name' /></div></div><div class='da-form-row'><label>Usuario</label><div class='da-form-item default'><input type='text' name='nick' /></div></div><div class='da-form-row'><label>Contraseña</label><div class='da-form-item default'><input type='password' name='pass' /></div></div><div class='da-form-row'><label>Rol</label><div class='da-form-item default'><select name='role'><option value='A'>Administrador</option><option value='P'>Profesor</option></select></div></div></form>";
    MostrarDialog("Agregar Usuario", "600", a, "add-form")
}
function EditUsuario(a, e, i, t, o) {
    var d = "<form class='da-form' id='add-form' method='post' action='index.php'><input type='hidden' name='action' value='editUsuario'/><input type='hidden' name='item' value='" + a + "'/>" + "<div class='da-form-row'>" + "<label>Nombre</label>" + "<div class='da-form-item default'>" + "<input type='text' name='name' value='" + e + "' />" + "</div>" + "</div>" + "<div class='da-form-row'>" + "<label>Usuario</label>" + "<div class='da-form-item default'>" + "<input type='text' name='nick' value='" + i + "' />" + "</div>" + "</div>" + "<div class='da-form-row'>" + "<label>Contraseña</label>" + "<div class='da-form-item default'>" + "<input type='password' name='pass' value='" + t + "' />" + "</div>" + "</div>" + "<div class='da-form-row'>" + "<label>Rol</label>" + "<div class='da-form-item default'>" + "<select name='role'>";
    d += "Administrador" == o ? "<option value='A' selected='selected'>Administrador</option><option value='P'>Profesor</option>" : "<option value='A'>Administrador</option><option value='P' selected='selected'>Profesor</option>", d += "</select></div></div></form>", MostrarDialog("Editar Usuario", "600", d, "add-form")
}
function AddAlumno() {
    var a = "<form class='da-form' id='add-form' method='post' action='index.php'><input type='hidden' name='action' value='addAlumno'/><div class='da-form-row'><label>Nombre</label><div class='da-form-item default'><input type='text' name='name' /></div></div><div class='da-form-row'><label>Usuario</label><div class='da-form-item default'><input type='text' name='nick' /></div></div><div class='da-form-row'><label>Contraseña</label><div class='da-form-item default'><input type='password' name='pass' /></div></div></form>";
    MostrarDialog("Agregar Alumno", "600", a, "add-form")
}
function EditAlumno(a, e, i, t) {
    var o = "<form class='da-form' id='add-form' method='post' action='index.php'><input type='hidden' name='action' value='editAlumno'/><input type='hidden' name='item' value='" + a + "'/>" + "<div class='da-form-row'>" + "<label>Nombre</label>" + "<div class='da-form-item default'>" + "<input type='text' name='name' value='" + e + "' />" + "</div>" + "</div>" + "<div class='da-form-row'>" + "<label>Usuario</label>" + "<div class='da-form-item default'>" + "<input type='text' name='nick' value='" + i + "' />" + "</div>" + "</div>" + "<div class='da-form-row'>" + "<label>Contraseña</label>" + "<div class='da-form-item default'>" + "<input type='password' name='pass' value='" + t + "' />" + "</div>" + "</div>" + "</form>";
    MostrarDialog("Editar Alumno", "600", o, "add-form")
}
function AddFuncion() {
    var a = "<form class='da-form' id='add-form' method='post' action='index.php'><input type='hidden' name='action' value='addFuncion'/><div class='da-form-row'><label>Función</label><div class='da-form-item default'><input type='text' name='funcion' /></div></div><div class='da-form-row'><label>Descripción</label><div class='da-form-item default'><input type='text' name='desc' /></div></div></form>";
    MostrarDialog("Agregar Función", "600", a, "add-form")
}
function EditFuncion(a, e, i) {
    var t = "<form class='da-form' id='add-form' method='post' action='index.php'><input type='hidden' name='action' value='editFuncion'/><input type='hidden' name='item' value='" + a + "'/>" + "<div class='da-form-row'>" + "<label>Función</label>" + "<div class='da-form-item default'>" + "<input type='text' name='funcion' value='" + e + "' />" + "</div>" + "</div>" + "<div class='da-form-row'>" + "<label>Descripción</label>" + "<div class='da-form-item default'>" + "<input type='text' name='desc' value='" + i + "' />" + "</div>" + "</div>" + "</form>";
    MostrarDialog("Editar Función", "600", t, "add-form")
}
function MostrarDialog(a, e, i, t) {
    $("#dialog-ui").html(i), Validar(), $("#dialog-ui").dialog({autoOpen: !1, title: a, modal: !0, width: e, buttons: [
        {text: "Aceptar", click: function () {
            $("#" + t).submit()
        }},
        {text: "Cerrar", click: function () {
            $(this).dialog("close")
        }}
    ]}).dialog("open")
}
function GraficarFuncEstudiante(a) {
    console.log(a), $(".button-funcion").attr("onclick", "");
    var e = $("#escx1").val(), i = $("#escx2").val(), t = "<div id='wait'> <img src='view/images/large-loading.gif'> </div>";
    $(".graph").append(t), $.ajax({type: "POST", url: "index.php", dataType: "json", data: {action: "procesar-paso-2", funcion: a, x1: e, x2: i}, success: function (e) {
        $("#wait").remove(), $("#escala-row").remove(), $(".da-panel").html(), $(".da-panel-title").html("Escriba la función a partir de su representación gráfica...");
        var i = "<label>Función <span class='required'>*</span></label><div class='da-form-item large'><input type='text' name='funcion' id='funcionEstudiante' class='required' /></div>";
        $(".da-form-row").html(i), i = "<div class='da-button-row'><a class='da-button green small' id='Sig' item='normal'>Siguiente</a></div>", $(".da-form-row").after(i), $("#Sig").click(function () {
            $("#funcionEstudiante").val() == a ? (alert("La función es correcta."), window.location.href = window.location.href.split("#")[0]) : (MarcarError(1), alert("Función incorrecta."))
        }), $("#func-form").submit(function () {
            return $("#funcionEstudiante").val() == a ? (alert("La función es correcta."), window.location.href = window.location.href.split("#")[0]) : (MarcarError(1), alert("Función incorrecta.")), !1
        }), grafico = e.grafico;
        for (var t = [], o = [], d = 0; d < grafico.length; d++)o.push("#000000");
        options.colors = o;
        for (var l = funcionsimple, d = 0; d < grafico.length; d++) {
            var n = [];
            d > 0 && (l = "");
            for (var r = 0; r < grafico[d].length; r++)n.push([grafico[d][r][0], grafico[d][r][1]]);
            t.push({label: l, data: n, points: {fillColor: "#ffffff", show: !1}})
        }
        draw(t)
    }})
}
function MarcarError(a) {
    $.ajax({type: "POST", url: "index.php", dataType: "json", data: {action: "marcar-error", paso: a}, success: function () {
    }})
}
function ValidarX1() {
    var a = parseFloat($("#escx1").val());
    if (isNaN(a))$("#escx1").val(""), alert("Debe ser un número."); else {
        var e = parseFloat($("#escx2").val());
        !isNaN(e) && e >= a ? $("#escx1").val(a) : isNaN(e) ? $("#escx1").val(a) : ($("#escx1").val(""), alert("Debe ser un número menor a x2."))
    }
}
function ValidarX2() {
    var a = parseFloat($("#escx2").val());
    if (isNaN(a))$("#escx2").val(""), alert("Debe ser un número."); else {
        var e = parseFloat($("#escx1").val());
        !isNaN(e) && a >= e ? $("#escx2").val(a) : isNaN(e) ? $("#escx2").val(a) : ($("#escx2").val(""), alert("Debe ser un número mayor a x1."))
    }
}
$(function () {
    var a = $("#from, #to").datepicker({defaultDate: "+1w", changeMonth: !0, numberOfMonths: 1, dateFormat: "dd-mm-yy", onSelect: function (e) {
        var i = "from" == this.id ? "minDate" : "maxDate", t = $(this).data("datepicker"), o = $.datepicker.parseDate(t.settings.dateFormat || $.datepicker._defaults.dateFormat, e, t.settings);
        a.not(this).datepicker("option", i, o)
    }})
}), $(function () {
    $("#from,#to").bind("keypress", function () {
        return!1
    })
});