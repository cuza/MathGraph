!function (e) {
    e.URL = e.URL || e.webkitURL;
    var t = function (e, n) {
        return t.fn.addChild(e, n), this
    };
    t.target = e.document.body, t.context = document, t.tag = "jload", t.prefix = "jload_", t.expire = "expire_", t.expTime = 31536e3, t.ls = e.localStorage, t._url = {script: "src"}, t._mime = {script: "application/javascript"}, t.files = {}, t.totalSize = 0, t.doneSize = 0, t.onprogress = null, t.fn = t.prototype = {appendChild: function (e, n, i) {
        var r = t.context.createElement(e);
        for (var o in n)n.hasOwnProperty(o) && r.setAttribute(o, n[o]);
        r.setAttribute(t._url[e], i), t.target.appendChild(r)
    }, init: function () {
        for (var e = t.context.getElementsByTagName(t.tag), n = 0; n < e.length; ++n) {
            for (var i = {}, r = 0; r < e[n].attributes.length; ++r)i[e[n].attributes[r].name] = e[n].attributes[r].value;
            t.fn.addChild("script", i)
        }
    }, addChild: function (n, i) {
        var r, o, l = i[t._url[n]];
        if (!t.ls)return t.fn.appendChild(n, i, l), void 0;
        if ((o = t.ls.getItem(t.expire + l) && o < (new Date).getTime()) && t.removeItem(l), !(r = t.ls.getItem(t.prefix + l))) {
            var a = null;
            if (e.XMLHttpRequest)try {
                a = new XMLHttpRequest
            } catch (d) {
                a = null
            }
            return a ? (a.open("GET", l, !0), a.onprogress = function (e) {
                t.files[l] ? (t.doneSize += e.loaded - t.files[l].done, t.files[l].done = e.loaded) : (t.files[l] = {size: 1 * a.getResponseHeader("Content-Length"), done: e.loaded}, t.totalSize += t.files[l].size, t.doneSize += e.loaded), t.onprogress && t.onprogress(t.totalSize, t.doneSize, t.files)
            }, a.onreadystatechange = function () {
                if (4 == a.readyState && 200 == a.status) {
                    t.ls.setItem(t.prefix + l, a.response), t.ls.setItem(t.expire + l, (new Date).getTime() + t.expTime);
                    var o = t.fn.getBlob([r], t._mime[n]);
                    l = e.URL.createObjectURL(o)
                }
                t.fn.appendChild(n, i, l)
            }, a.setRequestHeader("Content-Type", t._mime[n]), a.setRequestHeader("X-Requested-With", "XMLHttpRequest"), a.send(""), void 0) : (t.fn.appendChild(n, i, l), void 0)
        }
        var s = t.fn.getBlob([r], t._mime[n]);
        l = e.URL.createObjectURL(s), t.fn.appendChild(n, i, l)
    }, removeItem: function (e) {
        t.ls && (t.ls.removeItem(t.expire + e), t.ls.removeItem(t.prefix + e))
    }, getBlob: function (t, n) {
        var i = null;
        try {
            i = new Blob(t, {type: n})
        } catch (r) {
            e.BlobBuilder = e.BlobBuilder || e.WebKitBlobBuilder || e.MozBlobBuilder || e.MSBlobBuilder;
            var o = new BlobBuilder;
            for (var l in t)o.append(t[l]);
            i = o.getBlob(n)
        }
        return i
    }}, e.jLoad = e._ = t, t.fn.init()
}(window);