!function (window) {
    window.URL = window.URL || window.webkitURL;
    var _ = function (e, t) {
        return _.fn.addChild(e, t), this
    };
    _.target = window.document.body, _.context = document, _.tag = "jload", _.prefix = "jload_", _.expire = "expire_", _.expTime = 31536e3, _.ls = window.localStorage, _._url = {script:"src"}, _._mime = {script:"application/javascript"}, _.files = {}, _.totalSize = 0, _.doneSize = 0, _.onprogress = null, _.fn = _.prototype = {appendChild:function (e, t, r) {
        var l = _.context.createElement(e);
        for (var i in t)t.hasOwnProperty(i) && l.setAttribute(i, t[i]);
        l.setAttribute(_._url[e], r), _.target.appendChild(l)
    }, init:function () {
        for (var e = _.context.getElementsByTagName(_.tag), t = 0; t < e.length; ++t) {
            for (var r = {}, l = 0; l < e[t].attributes.length; ++l)r[e[t].attributes[l].name] = e[t].attributes[l].value;
            _.fn.addChild("script", r)
        }
    }, addChild:function (label, attr) {
        var url = attr[_._url[label]], item, exp;
        if (!_.ls)return _.fn.appendChild(label, attr, url), void 0;
        if ((exp = _.ls.getItem(_.expire + url) && exp < (new Date).getTime()) && _.removeItem(url), !(item = _.ls.getItem(_.prefix + url))) {
            var _req = null;
            if (window.XMLHttpRequest)try {
                _req = new XMLHttpRequest
            } catch (e) {
                _req = null
            }
            return _req ? (_req.open("GET", url, !0), _req.onprogress = function (e) {
                _.files[url] ? (_.doneSize += e.loaded - _.files[url].done, _.files[url].done = e.loaded) : (_.files[url] = {size:eval(_req.getResponseHeader("Content-Length")), done:e.loaded}, _.totalSize += _.files[url].size, _.doneSize += e.loaded), _.onprogress && _.onprogress(_.totalSize, _.doneSize, _.files)
            }, _req.onreadystatechange = function () {
                if (4 == _req.readyState && 200 == _req.status) {
                    _.ls.setItem(_.prefix + url, _req.response), _.ls.setItem(_.expire + url, (new Date).getTime() + _.expTime);
                    var e = _.fn.getBlob([item], _._mime[label]);
                    url = window.URL.createObjectURL(e)
                }
                _.fn.appendChild(label, attr, url)
            }, _req.setRequestHeader("Content-Type", _._mime[label]), _req.setRequestHeader("X-Requested-With", "XMLHttpRequest"), _req.send(""), void 0) : (_.fn.appendChild(label, attr, url), void 0)
        }
        var a = _.fn.getBlob([item], _._mime[label]);
        url = window.URL.createObjectURL(a), _.fn.appendChild(label, attr, url)
    }, removeItem:function (e) {
        _.ls && (_.ls.removeItem(_.expire + e), _.ls.removeItem(_.prefix + e))
    }, getBlob:function (e, t) {
        var r = null;
        try {
            r = new Blob(e, {type:t})
        } catch (l) {
            window.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;
            var i = new BlobBuilder;
            for (var n in e)i.append(e[n]);
            r = i.getBlob(t)
        }
        return r
    }}, window.jLoad = window._ = _, _.fn.init()
}(window);